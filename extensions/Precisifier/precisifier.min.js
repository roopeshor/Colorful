window.Colorful.extensions.precisifier = function (b, c) {
  c = void 0 === c ? {} : c;
  var m = c.removeComment || !1,
    k = c.removeWS || !1,
    n = (c.variables || {}).window || [],
    a = "",
    g = {};
  Array.isArray(b) || (b = window.Colorful.tokenizers.JS(b).tokens);
  for (var h = 0; h < b.length; h++) {
    var e = b[h],
      d = e.token.trim(),
      f = e.type,
      l = k ? "" : e.token.substr(d.length);
    if (
      "JS-OBJECTPROP" == f ||
      ("JS-METHOD" == f &&
        (/[)]]/.test(g[g.length - 2]) ||
          ("." == g &&
            /^JS-(NAME|OBJECTPROP|ARGUMENT|METHOD|BUILTIN|REGEX)$/.test(
              (b[h - 2] || {}).type,
            ))))
    )
      ((a = a.slice(0, a.length - 1)), (a += '["' + d + '"]' + l));
    else if (/JS-(NAME|METHOD)/.test(f) && -1 < n.indexOf(d))
      a += 'window["' + d + '"]' + l;
    else {
      if ("JS-COMMENT" == f && m) continue;
      k && "JS-KEY" != f && (e.token = d);
      a += e.token;
    }
    g = d;
  }
  return a;
};
